name: portainer

# list of files and directories listed that are copied into project .ddev directory
project_files:
- docker-compose.portainer.yaml
- docker-compose.portainer_norouter.yaml
- commands/host/portainer


ddev_version_constraint: '>= v1.24.10'

post_install_actions:
  - |
    #ddev-description:If router disabled, directly expose port
    #
    if ( {{ contains "ddev-router" (list .DdevGlobalConfig.omit_containers | toString) }} ); then
      printf "#ddev-generated\nservices:\n  portainer:\n    ports:\n      - 9100:9000\n" > docker-compose.portainer_norouter.yaml
    fi
  - |
    echo "You can now use 'ddev portainer' to launch Portainer UI"
